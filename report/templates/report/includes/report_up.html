{% load widget_tweaks %}
<script src=”https://code.jquery.com/jquery-1.12.4.js”></script>
<script src=”https://code.jquery.com/ui/1.12.1/jquery-ui.js”></script>

<form method="post" action="{% url 'report_update' form.instance.pk %}" id="DetailForm"  class="js-report-update-form"  data-subpro-url="/hr/ajax/load-subpro/">
  {% csrf_token %}
  {% include 'report/messages.html' %}
  {% if form.errors %}
	    {% for field in form %}
	        {% for error in field.errors %}
	            <div class="alert alert-danger">
	                <strong>{{ error|escape }}</strong>
	            </div>
	        {% endfor %}
	    {% endfor %}
	    {% for error in form.non_field_errors %}
	        <div class="alert alert-danger">
	            <strong>{{ error|escape }}</strong>
	        </div>
	    {% endfor %}
	{% endif %}
  <div class="modal-header">
    <h4 class="modal-title">Update Report</h4>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="Myfunction()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
  	<table>
  	<div class="form-group row">
		<label for="id_Report_date" class="col-sm-5 form-control-label">Report date</label> 
		<div class="col-sm-6">
		<input type="date" class="form-control"  name="Report_date" value="{{form.Report_date.value|date:'Y-m-d'}}" id="id_Report_date" required>
		</div></div>
	<div class="form-group row">
		<label for="id_Attendence_0" class="col-sm-5 form-control-label">Attendence</label> 
		<div class="col-sm-7"><ul id="id_Attendence">
		{{form.Attendence}}
	</ul></div></div>
	
	<div class="form-group row">
		<label for="id_Project_name" class="col-sm-5 form-control-label">Project name</label> 
		<div class="col-sm-6">
		{{form.Project_name}}
		</div></div>
	<div class="form-group row">
		<label for="id_Subproject_name" class="col-sm-5 form-control-label">Subproject name</label> 
		<div class="col-sm-6">
		{{form.Subproject_name}}
		</div></div>
	
	<div class="form-group row">
	<label for="id_Task" class="col-sm-5 form-control-label">Task</label> <div class="col-sm-6">
	{{form.Task}}
	</div></div>
	<div class="form-group row">
	<label for="id_start_time" class="col-sm-5 form-control-label">Start Time</label> 
	<div class="col-sm-6"><input type="datetime-local" class="form-control" name="start_time" value="{{form.start_time.value|date:'Y-m-d'}}T{{form.start_time.value|time:'H:i'}}"  id="id_start_time">
	</div></div>
	<div class="form-group row">
	<label for="id_start_time" class="col-sm-5 form-control-label">End Time</label> 
	<div class="col-sm-6"><input type="datetime-local" class="form-control" name="End_time" value="{{form.End_time.value|date:'Y-m-d'}}T{{form.End_time.value|time:'H:i'}}"  id="id_end_time">
	</div></div>
	<input class="form-control" type="hidden" name="No_hours" value="0"  id="id_No_hours" step="0.01">
	<div class="form-group row"><label for="id_Comments" class="col-sm-5 form-control-label">Comments</label> 
	<div class="col-sm-6"><input class="form-control" type="text" name="Comments" value="{{form.Comments.value}}" maxlength="500" id="id_Comments"></div></div>
	 </table>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default" data-dismiss="modal" onclick="Myfunction()">Close</button>
    <button type="submit" class="btn btn-primary">Update report</button>
  </div>
</form>
<script type="text/javascript">
$( function() {
$( "#id_Report_date").datepicker();
} );
</script>
<script type="text/javascript">
    $("#id_Project_name").change(function () {
      var url = $("#DetailForm").attr("data-subpro-url");  
      var projectId = $(this).val();  
      $.ajax({                       
        url: url,                    
        data: {
          'Project_name': projectId      
        },
        success: function (data) {  
          $("#id_Subproject_name").html(data); 
        }
      });
    });
  </script>
